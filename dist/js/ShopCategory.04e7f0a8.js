(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{155:function(t,i,e){},156:function(t,i,e){"use strict";var s=e(155);e.n(s).a},157:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("header",{staticClass:"top-bar",class:{right:!t.showBack&&!t.$slots.left&&t.$slots.right}},[t._t("left"),t._v(" "),t.showBack?e("i",{staticClass:"el-icon-arrow-left top-bar-go-back",on:{tap:function(i){return t.$router.go(-1)}}}):t._e(),t._v(" "),e("span",{staticClass:"top-bar-title ellipsis"},[t._v(t._s(t.title))]),t._v(" "),t._t("right")],2)};s._withStripped=!0;var o=e(39),n={name:"TopBar",props:{title:{type:String},showBack:{type:Boolean}},computed:Object(o.c)(["userInfo"])},r=(e(156),e(17)),a=Object(r.a)(n,s,[],!1,null,null,null);a.options.__file="src/components/TopBar.vue";i.a=a.exports},158:function(t,i,e){},159:function(t,i,e){"use strict";e.d(i,"e",(function(){return s})),e.d(i,"c",(function(){return o})),e.d(i,"d",(function(){return n})),e.d(i,"b",(function(){return r})),e.d(i,"a",(function(){return a}));var s=function(t,i){t&&localStorage.setItem(t,JSON.stringify(i))},o=function(t){if(t)return JSON.parse(localStorage.getItem(t))},n=function(t){t&&localStorage.removeItem(t)},r=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=t.children[t.children.length-1],s=a(e);return s+i<t.parentElement.clientHeight+t.parentElement.scrollTop},a=function(t){for(var i=t.offsetTop;t=t.offsetParent;)i+=t.offsetTop;return i}},160:function(t,i,e){},161:function(t,i,e){"use strict";var s=e(158);e.n(s).a},163:function(t,i,e){"use strict";var s=function(){var t=this.$createElement;return(this._self._c||t)("i",{staticClass:"el-icon-loading loading"})};s._withStripped=!0;var o={name:"LoadingIcon"},n=(e(161),e(17)),r=Object(n.a)(o,s,[],!1,null,null,null);r.options.__file="src/components/LoadingIcon.vue";i.a=r.exports},167:function(t,i,e){"use strict";var s=e(160);e.n(s).a},169:function(t,i,e){},190:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("ul",{staticClass:"shop-list"},[t.data.length?t._e():e("li",{staticStyle:{"border-bottom":"0",padding:"0"}},[e("loading-icon")],1),t._v(" "),t._l(t.data,(function(i,s){return t.data.length?e("li",{key:s,on:{tap:function(e){return t.toShop(i)}}},[e("img",{attrs:{src:t.imgBaseURL+i.image_path,alt:""}}),t._v(" "),e("div",{staticClass:"shop-list-info"},[e("div",{staticClass:"shop-list-info-header"},[e("h4",{class:["ellipsis",{premium:i.is_premium}]},[t._v(t._s(i.name))]),t._v(" "),e("ul",t._l(i.supports,(function(i){return e("li",{staticClass:"support"},[t._v(t._s(i.icon_name))])})),0)]),t._v(" "),e("div",{staticClass:"shop-list-info-content"},[e("div",[e("em",[t._v(t._s(i.rating))]),t._v(" "),e("b",[t._v("月售"+t._s(i.recent_order_num)+"单")])]),t._v(" "),e("div",[i.delivery_mode?e("i",[t._v("蜂鸟专送")]):t._e(),t._v(" "),t.isPunctual(i.supports)?e("span",[t._v("准时达")]):t._e()])]),t._v(" "),e("div",{staticClass:"shop-list-info-footer"},[e("b",[t._v("￥"+t._s(i.float_minimum_order_amount)+"起送/￥"+t._s(i.float_delivery_fee)+"配送")]),t._v(" "),e("em",[t._v(t._s(i.distance)+"/"+t._s(i.order_lead_time))])])])]):t._e()})),t._v(" "),t.data.length&&t.haveMore?e("li",{staticStyle:{position:"relative"}},[e("loading-icon")],1):t._e()],2)};s._withStripped=!0;var o=e(51),n={name:"ShopList",components:{LoadingIcon:e(163).a},props:{data:Array,haveMore:Boolean},data:function(){return{imgBaseURL:o.b}},methods:{isPunctual:function(t){return!(!Array.isArray(t)||!t.length)&&t.some((function(t){return"准"===t.icon_name}))},toShop:function(t){this.$router.push("/shop?geohash=".concat(this.$route.query.geohash,"&id=").concat(t.id))}}},r=(e(167),e(17)),a=Object(r.a)(n,s,[],!1,null,null,null);a.options.__file="src/components/ShopList.vue";i.a=a.exports},195:function(t,i,e){"use strict";var s=e(169);e.n(s).a},233:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"shop-category"},on:{swipeend:t.handleSwipeend}},[e("top-bar",{attrs:{"show-back":"",title:t.$route.query.title}}),t._v(" "),e("ul",{staticClass:"sort-container clearfix"},[e("li",{class:{checked:t.categoryClick},on:{tap:function(i){t.categoryClick=!t.categoryClick,t.sortClick=!1,t.siftClick=!1}}},[t._v("\n            分类"),e("i",{staticClass:"el-icon-caret-bottom"}),t._v(" "),e("transition",{attrs:{name:"zoom-in-top"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.categoryClick,expression:"categoryClick"}],staticClass:"category-dropdown"})])],1),t._v(" "),e("li",{class:{checked:t.sortClick},on:{tap:function(i){t.sortClick=!t.sortClick,t.categoryClick=!1,t.siftClick=!1}}},[t._v("\n            排序"),e("i",{staticClass:"el-icon-caret-bottom"}),t._v(" "),e("transition",{attrs:{name:"zoom-in-top"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.sortClick,expression:"sortClick"}],staticClass:"sort-dropdown"},[e("div",{staticClass:"sort-dropdown-item",class:{checked:4===t.sortIndex[0]},on:{tap:function(i){return t.sortIndex.splice(0,1,4)}}},[e("i",{staticClass:"el-icon-sort"},[t._v("智能排序")])]),t._v(" "),e("div",{staticClass:"sort-dropdown-item",class:{checked:5===t.sortIndex[0]},on:{tap:function(i){return t.sortIndex.splice(0,1,5)}}},[e("i",{staticClass:"el-icon-location-outline"},[t._v("距离最近")])]),t._v(" "),e("div",{staticClass:"sort-dropdown-item",class:{checked:6===t.sortIndex[0]},on:{tap:function(i){return t.sortIndex.splice(0,1,6)}}},[e("i",{staticClass:"el-icon-paperclip"},[t._v("销量最高")])]),t._v(" "),e("div",{staticClass:"sort-dropdown-item",class:{checked:1===t.sortIndex[0]},on:{tap:function(i){return t.sortIndex.splice(0,1,1)}}},[e("i",{staticClass:"el-icon-apple"},[t._v("起送最低")])]),t._v(" "),e("div",{staticClass:"sort-dropdown-item",class:{checked:2===t.sortIndex[0]},on:{tap:function(i){return t.sortIndex.splice(0,1,2)}}},[e("i",{staticClass:"el-icon-tableware"},[t._v("配送最快")])]),t._v(" "),e("div",{staticClass:"sort-dropdown-item",class:{checked:3===t.sortIndex[0]},on:{tap:function(i){return t.sortIndex.splice(0,1,3)}}},[e("i",{staticClass:"el-icon-coffee"},[t._v("评分最高")])])])])],1),t._v(" "),e("li",{class:{checked:t.siftClick},on:{tap:function(i){t.categoryClick=!1,t.sortClick=!1}}},[e("span",{on:{tap:function(i){t.siftClick=!t.siftClick}}},[t._v("筛选"),e("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),e("transition",{attrs:{name:"zoom-in-top"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.siftClick,expression:"siftClick"}],staticClass:"sift-dropdown clearfix"},[e("h5",[t._v("配送方式")]),t._v(" "),e("button",{class:{checked:!0===t.hummingBird},on:{tap:function(i){t.hummingBird=!t.hummingBird}}},[t._v("蜂鸟配送\n                    ")]),t._v(" "),e("h5",[t._v("商家特色")]),t._v(" "),e("button",{class:{checked:t.brand},on:{tap:function(i){t.brand=!t.brand}}},[t._v("品牌商家")]),t._v(" "),e("button",{class:{checked:t.insurance},on:{tap:function(i){t.insurance=!t.insurance}}},[t._v("外卖保")]),t._v(" "),e("button",{class:{checked:t.onTime},on:{tap:function(i){t.onTime=!t.onTime}}},[t._v("准时达")]),t._v(" "),e("button",{class:{checked:t.recent},on:{tap:function(i){t.recent=!t.recent}}},[t._v("新店")]),t._v(" "),e("button",{class:{checked:t.online},on:{tap:function(i){t.online=!t.online}}},[t._v("在线支付")]),t._v(" "),e("button",{class:{checked:t.invoice},on:{tap:function(i){t.invoice=!t.invoice}}},[t._v("开发票")]),t._v(" "),e("div",{on:{tap:function(i){t.siftClick=!1}}},[t._v("取消")]),t._v(" "),e("div",{on:{tap:function(i){t.siftClick=!1,t.confirm()}}},[t._v("确定")])])])],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.categoryClick||t.sortClick||t.siftClick,expression:"categoryClick||sortClick||siftClick"}],staticClass:"mask",on:{tap:function(i){t.categoryClick=!1,t.sortClick=!1,t.siftClick=!1}}}),t._v(" "),e("shop-list",{ref:"shopList",staticStyle:{"min-height":"100%"},attrs:{data:t.categoryShopList,"have-more":t.categoryHaveMore}})],1)};s._withStripped=!0;e(79),e(80),e(76),e(52),e(77),e(78),e(151);var o=e(53),n=e.n(o),r=e(39),a=e(157),c=e(190),l=e(159);function p(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,s)}return e}var u={name:"ShopCategory",components:{TopBar:a.a,ShopList:c.a},data:function(){return{id:this.$route.query.id,geohash:this.$route.query.geohash,categoryClick:!1,sortClick:!1,siftClick:!1,sortIndex:[4],deliveryMode:[],hummingBird:!1,supportIDs:[],brand:!1,insurance:!1,onTime:!1,recent:!1,online:!1,invoice:!1}},computed:function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?p(Object(e),!0).forEach((function(i){n()(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):p(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}({},Object(r.c)(["categoryShopList"]),{},Object(r.b)(["categoryHaveMore"])),watch:{id:function(){this.initData()},geohash:function(){this.initData()},sortIndex:function(){this.initData()},deliveryMode:function(){this.initData()},supportIDs:function(){this.initData()}},beforeRouteEnter:function(t,i,e){"/shop"===i.path?t.meta.transitionName="slide-to-bottom":t.meta.transitionName="slide-to-left",e()},asyncData:function(t){var i=t.store,e=t.route,s=e.query.id,o=e.query.geohash;return i.commit("setCategoryShopListIndex",0),i.dispatch("fetchCategoryShopList",{latitude:o.split(",")[0],longitude:o.split(",")[1],offset:i.state.shopListLimit*i.state.categoryShopListIndex,limit:i.state.shopListLimit,restaurant_category_ids:[s]})},activated:function(){this.id=this.$route.query.id,this.geohash=this.$route.query.geohash},deactivated:function(){this.categoryClick=!1,this.sortClick=!1,this.siftClick=!1,this.sortIndex[0]=4,this.deliveryMode.length=0,this.supportIDs.length=0,this.hummingBird=!1,this.brand=!1,this.insurance=!1,this.onTime=!1,this.recent=!1,this.online=!1,this.invoice=!1},methods:{initData:function(){var t=this.$store,i=this.id,e=this.geohash;return t.commit("setCategoryShopList",[]),t.commit("setCategoryShopListIndex",0),t.dispatch("fetchCategoryShopList",{latitude:e.split(",")[0],longitude:e.split(",")[1],order_by:this.sortIndex[0],offset:t.state.shopListLimit*t.state.categoryShopListIndex,limit:t.state.shopListLimit,restaurant_category_ids:[i],delivery_mode:this.deliveryMode,support_ids:this.supportIDs})},loadMore:function(){var t=this.$store,i=this.id,e=this.geohash;return t.dispatch("fetchMoreCategoryShopList",{latitude:e.split(",")[0],longitude:e.split(",")[1],order_by:this.sortIndex[0],offset:t.state.shopListLimit*t.state.categoryShopListIndex,limit:t.state.shopListLimit,restaurant_category_ids:[i],delivery_mode:this.deliveryMode,support_ids:this.supportIDs})},confirm:function(){if(this.hummingBird)-1===this.deliveryMode.indexOf(1)&&this.deliveryMode.push(1);else{var t=this.deliveryMode.indexOf(1);t>-1&&this.deliveryMode.splice(t,1)}if(this.brand)-1===this.supportIDs.indexOf(8)&&this.supportIDs.push(8);else{var i=this.supportIDs.indexOf(8);i>-1&&this.supportIDs.splice(i,1)}if(this.insurance)-1===this.supportIDs.indexOf(7)&&this.supportIDs.push(7);else{var e=this.supportIDs.indexOf(7);e>-1&&this.supportIDs.splice(e,1)}if(this.onTime)-1===this.supportIDs.indexOf(9)&&this.supportIDs.push(9);else{var s=this.supportIDs.indexOf(9);s>-1&&this.supportIDs.splice(s,1)}if(this.recent)-1===this.supportIDs.indexOf(5)&&this.supportIDs.push(5);else{var o=this.supportIDs.indexOf(5);o>-1&&this.supportIDs.splice(o,1)}if(this.online)-1===this.supportIDs.indexOf(3)&&this.supportIDs.push(3);else{var n=this.supportIDs.indexOf(3);n>-1&&this.supportIDs.splice(n,1)}if(this.invoice)-1===this.supportIDs.indexOf(4)&&this.supportIDs.push(4);else{var r=this.supportIDs.indexOf(4);r>-1&&this.supportIDs.splice(r,1)}},handleSwipeend:function(){var t=this,i=this.$refs.shopList.$el.parentElement.scrollTop;requestAnimationFrame((function(){t.$refs.shopList.$el.parentElement.scrollTop!==i?t.handleSwipeend():Object(l.b)(t.$refs.shopList.$el)&&t.categoryHaveMore&&t.loadMore()}))}}},h=(e(195),e(17)),d=Object(h.a)(u,s,[],!1,null,null,null);d.options.__file="src/views/Home/ShopCategory.vue";i.default=d.exports}}]);