(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{155:function(t,e,i){},156:function(t,e,i){"use strict";var o=i(155);i.n(o).a},157:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{staticClass:"top-bar",class:{right:!t.showBack&&!t.$slots.left&&t.$slots.right}},[t._t("left"),t._v(" "),t.showBack?i("i",{staticClass:"el-icon-arrow-left top-bar-go-back",on:{tap:function(e){return t.$router.go(-1)}}}):t._e(),t._v(" "),i("span",{staticClass:"top-bar-title ellipsis"},[t._v(t._s(t.title))]),t._v(" "),t._t("right")],2)};o._withStripped=!0;var n=i(39),s={name:"TopBar",props:{title:{type:String},showBack:{type:Boolean}},computed:Object(n.c)(["userInfo"])},a=(i(156),i(17)),r=Object(a.a)(s,o,[],!1,null,null,null);r.options.__file="src/components/TopBar.vue";e.a=r.exports},158:function(t,e,i){},159:function(t,e,i){"use strict";i.d(e,"e",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"d",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return r}));var o=function(t,e){t&&localStorage.setItem(t,JSON.stringify(e))},n=function(t){if(t)return JSON.parse(localStorage.getItem(t))},s=function(t){t&&localStorage.removeItem(t)},a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.children[t.children.length-1],o=r(i);return o+e<t.parentElement.clientHeight+t.parentElement.scrollTop},r=function(t){for(var e=t.offsetTop;t=t.offsetParent;)e+=t.offsetTop;return e}},160:function(t,e,i){},161:function(t,e,i){"use strict";var o=i(158);i.n(o).a},163:function(t,e,i){"use strict";var o=function(){var t=this.$createElement;return(this._self._c||t)("i",{staticClass:"el-icon-loading loading"})};o._withStripped=!0;var n={name:"LoadingIcon"},s=(i(161),i(17)),a=Object(s.a)(n,o,[],!1,null,null,null);a.options.__file="src/components/LoadingIcon.vue";e.a=a.exports},167:function(t,e,i){"use strict";var o=i(160);i.n(o).a},168:function(t,e,i){},190:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"shop-list"},[t.data.length?t._e():i("li",{staticStyle:{"border-bottom":"0",padding:"0"}},[i("loading-icon")],1),t._v(" "),t._l(t.data,(function(e,o){return t.data.length?i("li",{key:o,on:{tap:function(i){return t.toShop(e)}}},[i("img",{attrs:{src:t.imgBaseURL+e.image_path,alt:""}}),t._v(" "),i("div",{staticClass:"shop-list-info"},[i("div",{staticClass:"shop-list-info-header"},[i("h4",{class:["ellipsis",{premium:e.is_premium}]},[t._v(t._s(e.name))]),t._v(" "),i("ul",t._l(e.supports,(function(e){return i("li",{staticClass:"support"},[t._v(t._s(e.icon_name))])})),0)]),t._v(" "),i("div",{staticClass:"shop-list-info-content"},[i("div",[i("em",[t._v(t._s(e.rating))]),t._v(" "),i("b",[t._v("月售"+t._s(e.recent_order_num)+"单")])]),t._v(" "),i("div",[e.delivery_mode?i("i",[t._v("蜂鸟专送")]):t._e(),t._v(" "),t.isPunctual(e.supports)?i("span",[t._v("准时达")]):t._e()])]),t._v(" "),i("div",{staticClass:"shop-list-info-footer"},[i("b",[t._v("￥"+t._s(e.float_minimum_order_amount)+"起送/￥"+t._s(e.float_delivery_fee)+"配送")]),t._v(" "),i("em",[t._v(t._s(e.distance)+"/"+t._s(e.order_lead_time))])])])]):t._e()})),t._v(" "),t.data.length&&t.haveMore?i("li",{staticStyle:{position:"relative"}},[i("loading-icon")],1):t._e()],2)};o._withStripped=!0;var n=i(51),s={name:"ShopList",components:{LoadingIcon:i(163).a},props:{data:Array,haveMore:Boolean},data:function(){return{imgBaseURL:n.b}},methods:{isPunctual:function(t){return!(!Array.isArray(t)||!t.length)&&t.some((function(t){return"准"===t.icon_name}))},toShop:function(t){this.$router.push("/shop?geohash=".concat(this.$route.query.geohash,"&id=").concat(t.id))}}},a=(i(167),i(17)),r=Object(a.a)(s,o,[],!1,null,null,null);r.options.__file="src/components/ShopList.vue";e.a=r.exports},194:function(t,e,i){"use strict";var o=i(168);i.n(o).a},227:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"home"},on:{swipeend:t.handleSwipeend}},[i("top-bar",{attrs:{title:t.position.name},scopedSlots:t._u([{key:"left",fn:function(){return[i("i",{staticClass:"el-icon-position",on:{tap:function(e){return t.$router.push("/locate")}}})]},proxy:!0},{key:"right",fn:function(){return[i("i",{staticClass:"el-icon-chat-line-round"})]},proxy:!0}])}),t._v(" "),i("div",{staticClass:"swiper-container"},[i("div",{staticClass:"swiper-wrapper"},[i("div",{staticClass:"swiper-slide"},[i("ul",{staticClass:"clearfix index-entry"},t._l(t.$options.option.indexEntry1,(function(e,o){return i("li",{key:o,on:{tap:function(i){return t.toShopCategory(e)}}},[i("img",{attrs:{src:t.imgCDN+e.image_url,alt:""}}),t._v(" "),i("span",{domProps:{textContent:t._s(e.title)}})])})),0)]),t._v(" "),i("div",{staticClass:"swiper-slide"},[i("ul",{staticClass:"clearfix index-entry"},t._l(t.$options.option.indexEntry2,(function(e,o){return i("li",{key:o,on:{tap:function(i){return t.toShopCategory(e)}}},[i("img",{attrs:{src:t.imgCDN+e.image_url,alt:""}}),t._v(" "),i("span",{domProps:{textContent:t._s(e.title)}})])})),0)])])]),t._v(" "),i("shop-list",{ref:"shopList",staticStyle:{"border-top":".025rem solid #e4e4e4","margin-top":".5rem","min-height":"calc(100% - 9.05rem)"},attrs:{data:t.homeShopList,"have-more":t.homeHaveMore}})],1)};o._withStripped=!0;i(79),i(80),i(78),i(151),i(148),i(76),i(52),i(77),i(149);var n=i(53),s=i.n(n),a=i(154),r=(i(152),i(39)),c=i(157),l=i(190),p=i(51),u=i(159);function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}var h={name:"Home",components:{TopBar:c.a,ShopList:l.a},data:function(){return{geohash:this.$route.query.geohash,imgCDN:p.c}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){s()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({shopListOffset:function(){return this.$isServer?0:2.3*parseInt(window.getComputedStyle(document.documentElement).fontSize)}},Object(r.c)(["position","homeShopList"]),{},Object(r.b)(["homeHaveMore"])),option:{indexEntry1:[{title:"甜品饮品",id:"239",image_url:"2/35/696aa5cf9820adada9b11a3d14bf5jpeg.jpeg"},{title:"商店超市",id:"252",image_url:"0/da/f42235e6929a5cb0e7013115ce78djpeg.jpeg"},{title:"异国料理",id:"260",image_url:"b/7e/d1890cf73ae6f2adb97caa39de7fcjpeg.jpeg"},{title:"简餐",id:"265",image_url:"d/38/7bddb07503aea4b711236348e2632jpeg.jpeg"},{title:"咖喱饭",id:"268",image_url:"a/fa/d41b04d520d445dc5de42dae9a384jpeg.jpeg"},{title:"东南亚菜",id:"264",image_url:"3/84/8e031bf7b3c036b4ec19edff16e46jpeg.jpeg"},{title:"米粉面馆",id:"213",image_url:"d/49/7757ff22e8ab28e7dfa5f7e2c2692jpeg.jpeg"},{title:"黄焖鸡米饭",id:"267",image_url:"e/7e/02b72b5e63c127d5bfae57b8e4ab1jpeg.jpeg"}],indexEntry2:[{title:"川湘菜",id:"221",image_url:"9/7c/9700836a33e05c2410bda8da59117jpeg.jpeg"},{title:"麻辣烫",id:"214",image_url:"3/c7/a9ef469a12e7a596b559145b87f09jpeg.jpeg"},{title:"包子粥店",id:"215",image_url:"2/17/244241b514affc0f12f4168cf6628jpeg.jpeg"},{title:"鲜花蛋糕",id:"248",image_url:"8/83/171fd98b85dee3b3f4243b7459b48jpeg.jpeg"},{title:"日韩料理",id:"229",image_url:"6/1a/1e0f448be0624c62db416e864d2afjpeg.jpeg"},{title:"果蔬生鲜",id:"244",image_url:"4/34/ea0d51c9608310cf41faa5de6b8efjpeg.jpeg"},{title:"汉堡薯条",id:"212",image_url:"b/7f/432619fb21a40b05cd25d11eca02djpeg.jpeg"},{title:"披萨意面",id:"211",image_url:"7/b6/235761e50d391445f021922b71789jpeg.jpeg"}]},watch:{geohash:function(){this.initData()}},beforeRouteEnter:function(t,e,i){"/search"===e.path||"/order"===e.path||"/mine"===e.path?t.meta.transitionName="":"/shopCategory"===e.path?t.meta.transitionName="slide-to-right":"/shop"===e.path?t.meta.transitionName="slide-to-bottom":t.meta.transitionName="slide-to-left",i()},asyncData:function(t){var e=t.store,i=t.route.query.geohash;return e.commit("setHomeShopList",[]),e.commit("setHomeShopListIndex",0),Promise.all([e.dispatch("fetchPosition",i),e.dispatch("fetchHomeShopList",{latitude:i.split(",")[0],longitude:i.split(",")[1],order_by:5,offset:e.state.shopListLimit*e.state.homeShopListIndex,limit:e.state.shopListLimit})])},mounted:function(){new a.a("#home .swiper-container")},activated:function(){this.geohash=this.$route.query.geohash},methods:{initData:function(){var t=this.$store,e=this.geohash;return t.commit("setHomeShopList",[]),t.commit("setHomeShopListIndex",0),Promise.all([t.dispatch("fetchPosition",e),t.dispatch("fetchHomeShopList",{latitude:e.split(",")[0],longitude:e.split(",")[1],order_by:5,offset:t.state.shopListLimit*t.state.homeShopListIndex,limit:t.state.shopListLimit})])},loadMore:function(){var t=this.$store,e=this.geohash;return t.dispatch("fetchMoreHomeShopList",{latitude:e.split(",")[0],longitude:e.split(",")[1],order_by:5,offset:t.state.shopListLimit*t.state.homeShopListIndex,limit:t.state.shopListLimit})},toShopCategory:function(t){this.$router.push("/shopCategory?geohash=".concat(this.geohash,"&title=").concat(t.title,"&id=").concat(t.id))},handleSwipeend:function(){var t=this,e=this.$refs.shopList.$el.parentElement.scrollTop;requestAnimationFrame((function(){t.$refs.shopList.$el.parentElement.scrollTop!==e?t.handleSwipeend():Object(u.b)(t.$refs.shopList.$el,t.shopListOffset)&&t.homeHaveMore&&t.loadMore()}))}}},f=(i(194),i(17)),m=Object(f.a)(h,o,[],!1,null,null,null);m.options.__file="src/views/Home.vue";e.default=m.exports}}]);