(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{155:function(t,e,a){},156:function(t,e,a){"use strict";var o=a(155);a.n(o).a},157:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"top-bar",class:{right:!t.showBack&&!t.$slots.left&&t.$slots.right}},[t._t("left"),t._v(" "),t.showBack?a("i",{staticClass:"el-icon-arrow-left top-bar-go-back",on:{tap:function(e){return t.$router.go(-1)}}}):t._e(),t._v(" "),a("span",{staticClass:"top-bar-title ellipsis"},[t._v(t._s(t.title))]),t._v(" "),t._t("right")],2)};o._withStripped=!0;var r=a(39),n={name:"TopBar",props:{title:{type:String},showBack:{type:Boolean}},computed:Object(r.c)(["userInfo"])},s=(a(156),a(17)),c=Object(s.a)(n,o,[],!1,null,null,null);c.options.__file="src/components/TopBar.vue";e.a=c.exports},166:function(t,e,a){},193:function(t,e,a){"use strict";var o=a(166);a.n(o).a},225:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"login"}},[a("top-bar",{attrs:{title:"用户登录","show-back":""}}),t._v(" "),a("form",[a("section",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}})]),t._v(" "),a("section",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})]),t._v(" "),a("section",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.captcha_code,expression:"form.captcha_code"}],attrs:{type:"text",placeholder:"验证码"},domProps:{value:t.form.captcha_code},on:{input:function(e){e.target.composing||t.$set(t.form,"captcha_code",e.target.value)}}}),t._v(" "),a("img",{attrs:{src:t.captcha,alt:""},on:{tap:t.changeCaptcha}})])]),t._v(" "),a("button",{attrs:{type:"button"},on:{tap:t.submit}},[t._v("登录")])],1)};o._withStripped=!0;a(150);var r=a(157),n=a(2),s={name:"Login",components:{TopBar:r.a},data:function(){return{form:{username:"",password:"",captcha_code:""},captcha:"",fromShop:!1}},beforeRouteEnter:function(t,e,a){"/shop"===e.path?a((function(t){t.fromShop=!0})):a()},activated:function(){var t=this;Object(n.e)().then((function(e){var a=e.data;t.captcha=a.code}))},deactivated:function(){this.form={username:"",password:"",captcha_code:""},this.captcha="",this.fromShop=!1},methods:{submit:function(){var t=this;this.form.username?this.form.password?this.form.captcha_code?Object(n.u)(this.form.username,this.form.password,this.form.captcha_code).then((function(e){var a=e.data;0===a.status?(t.$alert({type:"warning",content:a.message}),Object(n.e)().then((function(e){var a=e.data;t.captcha=a.code}))):(t.$alert({type:"success",content:"登录成功"}),t.$store.commit("setUserInfo",a),t.fromShop?t.$router.replace("/confirmOrder?geohash="+t.$route.query.geohash+"&id="+t.$route.query.id):t.$router.go(-1))})):this.$alert({type:"warning",content:"请输入验证码"}):this.$alert({type:"warning",content:"请输入密码"}):this.$alert({type:"warning",content:"请输入用户名"})},changeCaptcha:function(){var t=this;Object(n.e)().then((function(e){var a=e.data;t.captcha=a.code}))}}},c=(a(193),a(17)),i=Object(c.a)(s,o,[],!1,null,null,null);i.options.__file="src/views/Login.vue";e.default=i.exports}}]);